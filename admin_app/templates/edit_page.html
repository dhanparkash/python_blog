{% extends "admin_base.html" %}

{% block content %}
<h2>Edit Page</h2>

<!-- Flash messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

<form method="POST">
    <label for="title">Title:</label><br>
    <input type="text" name="title" id="title" value="{{ page.title }}" required><br><br>

    <label for="slug">Slug:</label><br>
    <input type="text" name="slug" id="slug" value="{{ page.slug }}" required><br><br>

    <label for="content">Content:</label><br>
    <textarea name="content" id="content" rows="10" required>{{ page.content }}</textarea><br><br>

    <button type="submit">Update Page</button>
</form>

<a href="{{ url_for('admin.pages_view') }}">Back to Pages</a>

<!-- TinyMCE CDN -->
<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>


<script>
  tinymce.init({
    selector: '#content',   // Apply to the textarea with id="content"
    height: 400,
    menubar: true,
    plugins: [
      'advlist autolink lists link image charmap preview anchor',
      'searchreplace visualblocks code fullscreen',
      'insertdatetime media table paste help wordcount'
    ],
    toolbar: 'undo redo | formatselect | ' +
             'bold italic backcolor | alignleft aligncenter ' +
             'alignright alignjustify | bullist numlist outdent indent | ' +
             'removeformat | help'
  });
</script>
{% endblock %}
