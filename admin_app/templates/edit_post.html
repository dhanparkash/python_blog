{% extends "admin_base.html" %}

{% block content %}
<h2>Edit Post</h2>

<!-- Flash messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

<form method="POST">
    <label for="title">Title:</label><br>
    <input type="text" name="title" id="title" value="{{ post.title }}" required><br><br>

    <label for="slug">Slug:</label><br>
    <input type="text" name="slug" id="slug" value="{{ post.slug }}" required><br><br>

    <label for="content">Content:</label><br>
    <textarea name="content" id="content" rows="10" required>{{ post.content }}</textarea><br><br>

    <button type="submit">Update Post</button>
</form>

<a href="{{ url_for('admin.admin_posts') }}">Back to Posts</a>

<!-- TinyMCE CDN (no API key needed) -->
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
      tinymce.init({
        selector: '#content',
        height: 300,
        menubar: false,
        plugins: [
          'advlist autolink lists link image charmap print preview anchor',
          'searchreplace visualblocks code fullscreen',
          'insertdatetime media table code help wordcount'
        ],
        toolbar: 'undo redo | formatselect | bold italic backcolor | \
                  alignleft aligncenter alignright alignjustify | \
                  bullist numlist outdent indent | removeformat | help'
      });
    </script>
{% endblock %}
